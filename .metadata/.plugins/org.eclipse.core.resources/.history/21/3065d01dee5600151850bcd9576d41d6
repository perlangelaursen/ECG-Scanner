#include <stdio.h>
#include "sensor.h"

// Filter function declerations
int lowPass();
int highPass();
int derivative();
int squaring();
int movingWindowIntegration();

// arrays
int x[33], y[3000];
int n = 2;

// Main program
int main(int argc, char *argv[]) {


	while((x[n % 33] = getNextData()) != EOF) {
			lowpass();
		}

/*
	for (int i = 0; i < 33; i++) {
		x[i] = getNextData();
		n++;
	}








*/

	// End of program
	return 0;
}

int increment(){

}

// Filters here
int lowPass() {
	int m = n % 32;
	y[n] = 2 * y[n-1] - y[n-2] + 1 / 32 * (x[m] - 2 * x[m-6] + x[m-12]);
	return y[n];
}

int highPass() {
	int m = n % 32;
	y[n] = y[n-1] - x[m] / 32 + x[m-16] - x[m-17] + x[m-32] / 32;
	return y[n];
}

int derivative() {
	int m = n % 32;
	y[n] = 1 / 8 * (2 * x[m] + x[m-1] - x[m-3] - 2 * x[m-4]);
	return y[n];
}

int squaring() {
	y[n] *= y[n];
	return y[n];
}

int movingWindowIntegration() {
	int m = n % 32;

	int N = 30; // ????
	int buf = 0;

	for (int i = 1; i < N; i++) {
		buf += x[n-(N-i)];
	}


	y[n] = 1 / N * buf;
	return y[n];
}










